<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Inotify (inotify.Inotify)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">inotify</a> &#x00BB; Inotify</nav><header class="odoc-preamble"><h1>Module <code><span>Inotify</span></code></h1><p>Inotify binding for OCaml</p><ul class="at-tags"><li class="see"><span class="at-tag">see</span> <a href="http://man7.org/linux/man-pages/man7/inotify.7.html" class="value">http://man7.org/linux/man-pages/man7/inotify.7.html</a> <p>Inotify manual page</p></li></ul></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-selector"><a href="#type-selector" class="anchor"></a><code><span><span class="keyword">type</span> selector</span><span> = </span></code><ol><li id="type-selector.S_Access" class="def variant constructor anchored"><a href="#type-selector.S_Access" class="anchor"></a><code><span>| </span><span><span class="constructor">S_Access</span></span></code></li><li id="type-selector.S_Attrib" class="def variant constructor anchored"><a href="#type-selector.S_Attrib" class="anchor"></a><code><span>| </span><span><span class="constructor">S_Attrib</span></span></code></li><li id="type-selector.S_Close_write" class="def variant constructor anchored"><a href="#type-selector.S_Close_write" class="anchor"></a><code><span>| </span><span><span class="constructor">S_Close_write</span></span></code></li><li id="type-selector.S_Close_nowrite" class="def variant constructor anchored"><a href="#type-selector.S_Close_nowrite" class="anchor"></a><code><span>| </span><span><span class="constructor">S_Close_nowrite</span></span></code></li><li id="type-selector.S_Create" class="def variant constructor anchored"><a href="#type-selector.S_Create" class="anchor"></a><code><span>| </span><span><span class="constructor">S_Create</span></span></code></li><li id="type-selector.S_Delete" class="def variant constructor anchored"><a href="#type-selector.S_Delete" class="anchor"></a><code><span>| </span><span><span class="constructor">S_Delete</span></span></code></li><li id="type-selector.S_Delete_self" class="def variant constructor anchored"><a href="#type-selector.S_Delete_self" class="anchor"></a><code><span>| </span><span><span class="constructor">S_Delete_self</span></span></code></li><li id="type-selector.S_Modify" class="def variant constructor anchored"><a href="#type-selector.S_Modify" class="anchor"></a><code><span>| </span><span><span class="constructor">S_Modify</span></span></code></li><li id="type-selector.S_Move_self" class="def variant constructor anchored"><a href="#type-selector.S_Move_self" class="anchor"></a><code><span>| </span><span><span class="constructor">S_Move_self</span></span></code></li><li id="type-selector.S_Moved_from" class="def variant constructor anchored"><a href="#type-selector.S_Moved_from" class="anchor"></a><code><span>| </span><span><span class="constructor">S_Moved_from</span></span></code></li><li id="type-selector.S_Moved_to" class="def variant constructor anchored"><a href="#type-selector.S_Moved_to" class="anchor"></a><code><span>| </span><span><span class="constructor">S_Moved_to</span></span></code></li><li id="type-selector.S_Open" class="def variant constructor anchored"><a href="#type-selector.S_Open" class="anchor"></a><code><span>| </span><span><span class="constructor">S_Open</span></span></code></li><li id="type-selector.S_Dont_follow" class="def variant constructor anchored"><a href="#type-selector.S_Dont_follow" class="anchor"></a><code><span>| </span><span><span class="constructor">S_Dont_follow</span></span></code></li><li id="type-selector.S_Mask_add" class="def variant constructor anchored"><a href="#type-selector.S_Mask_add" class="anchor"></a><code><span>| </span><span><span class="constructor">S_Mask_add</span></span></code></li><li id="type-selector.S_Oneshot" class="def variant constructor anchored"><a href="#type-selector.S_Oneshot" class="anchor"></a><code><span>| </span><span><span class="constructor">S_Oneshot</span></span></code></li><li id="type-selector.S_Onlydir" class="def variant constructor anchored"><a href="#type-selector.S_Onlydir" class="anchor"></a><code><span>| </span><span><span class="constructor">S_Onlydir</span></span></code></li><li id="type-selector.S_Move" class="def variant constructor anchored"><a href="#type-selector.S_Move" class="anchor"></a><code><span>| </span><span><span class="constructor">S_Move</span></span></code></li><li id="type-selector.S_Close" class="def variant constructor anchored"><a href="#type-selector.S_Close" class="anchor"></a><code><span>| </span><span><span class="constructor">S_Close</span></span></code></li><li id="type-selector.S_All" class="def variant constructor anchored"><a href="#type-selector.S_All" class="anchor"></a><code><span>| </span><span><span class="constructor">S_All</span></span></code></li></ol></div><div class="spec-doc"><p>Type of event masks.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-event_kind"><a href="#type-event_kind" class="anchor"></a><code><span><span class="keyword">type</span> event_kind</span><span> = </span></code><ol><li id="type-event_kind.Access" class="def variant constructor anchored"><a href="#type-event_kind.Access" class="anchor"></a><code><span>| </span><span><span class="constructor">Access</span></span></code></li><li id="type-event_kind.Attrib" class="def variant constructor anchored"><a href="#type-event_kind.Attrib" class="anchor"></a><code><span>| </span><span><span class="constructor">Attrib</span></span></code></li><li id="type-event_kind.Close_write" class="def variant constructor anchored"><a href="#type-event_kind.Close_write" class="anchor"></a><code><span>| </span><span><span class="constructor">Close_write</span></span></code></li><li id="type-event_kind.Close_nowrite" class="def variant constructor anchored"><a href="#type-event_kind.Close_nowrite" class="anchor"></a><code><span>| </span><span><span class="constructor">Close_nowrite</span></span></code></li><li id="type-event_kind.Create" class="def variant constructor anchored"><a href="#type-event_kind.Create" class="anchor"></a><code><span>| </span><span><span class="constructor">Create</span></span></code></li><li id="type-event_kind.Delete" class="def variant constructor anchored"><a href="#type-event_kind.Delete" class="anchor"></a><code><span>| </span><span><span class="constructor">Delete</span></span></code></li><li id="type-event_kind.Delete_self" class="def variant constructor anchored"><a href="#type-event_kind.Delete_self" class="anchor"></a><code><span>| </span><span><span class="constructor">Delete_self</span></span></code></li><li id="type-event_kind.Modify" class="def variant constructor anchored"><a href="#type-event_kind.Modify" class="anchor"></a><code><span>| </span><span><span class="constructor">Modify</span></span></code></li><li id="type-event_kind.Move_self" class="def variant constructor anchored"><a href="#type-event_kind.Move_self" class="anchor"></a><code><span>| </span><span><span class="constructor">Move_self</span></span></code></li><li id="type-event_kind.Moved_from" class="def variant constructor anchored"><a href="#type-event_kind.Moved_from" class="anchor"></a><code><span>| </span><span><span class="constructor">Moved_from</span></span></code></li><li id="type-event_kind.Moved_to" class="def variant constructor anchored"><a href="#type-event_kind.Moved_to" class="anchor"></a><code><span>| </span><span><span class="constructor">Moved_to</span></span></code></li><li id="type-event_kind.Open" class="def variant constructor anchored"><a href="#type-event_kind.Open" class="anchor"></a><code><span>| </span><span><span class="constructor">Open</span></span></code></li><li id="type-event_kind.Ignored" class="def variant constructor anchored"><a href="#type-event_kind.Ignored" class="anchor"></a><code><span>| </span><span><span class="constructor">Ignored</span></span></code></li><li id="type-event_kind.Isdir" class="def variant constructor anchored"><a href="#type-event_kind.Isdir" class="anchor"></a><code><span>| </span><span><span class="constructor">Isdir</span></span></code></li><li id="type-event_kind.Q_overflow" class="def variant constructor anchored"><a href="#type-event_kind.Q_overflow" class="anchor"></a><code><span>| </span><span><span class="constructor">Q_overflow</span></span></code></li><li id="type-event_kind.Unmount" class="def variant constructor anchored"><a href="#type-event_kind.Unmount" class="anchor"></a><code><span>| </span><span><span class="constructor">Unmount</span></span></code></li></ol></div><div class="spec-doc"><p>Type of observed events.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-watch"><a href="#type-watch" class="anchor"></a><code><span><span class="keyword">type</span> watch</span></code></div><div class="spec-doc"><p>Type of watch descriptors.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-event"><a href="#type-event" class="anchor"></a><code><span><span class="keyword">type</span> event</span><span> = <a href="#type-watch">watch</a> * <span><a href="#type-event_kind">event_kind</a> list</span> * int32 * <span>string option</span></span></code></div><div class="spec-doc"><p>Type of received events, corresponding to <code>struct inotify_event</code>. In event <code>wd, kinds, cookie, path</code>, <code>wd</code> corresponds to <code>inotify_event.wd</code>, <code>kinds</code> corresponds to the bits set in <code>inotify_event.mask</code>, <code>cookie</code> corresponds to <code>inotify_event.cookie</code>, <code>path</code> is <code>Some filename</code> if <code>inotify_event.len &gt; 0</code> and <code>None</code> otherwise.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-int_of_watch"><a href="#val-int_of_watch" class="anchor"></a><code><span><span class="keyword">val</span> int_of_watch : <span><a href="#type-watch">watch</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>int_of_watch wd</code> returns the underlying integer representation of watch descriptor <code>wd</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-string_of_event_kind"><a href="#val-string_of_event_kind" class="anchor"></a><code><span><span class="keyword">val</span> string_of_event_kind : <span><a href="#type-event_kind">event_kind</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>string_of_event_kind ek</code> returns the string representation of event kind <code>ek</code>, e.g. <code>string_of_event_kind Move_self</code> â‰¡ <code>&quot;MOVE_SELF&quot;</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-string_of_event"><a href="#val-string_of_event" class="anchor"></a><code><span><span class="keyword">val</span> string_of_event : <span><a href="#type-event">event</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>string_of_event event</code> returns the string representation of event <code>ev</code>, e.g. <code>string_of_event</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : <span>unit <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Unix</span>.file_descr</span></code></div><div class="spec-doc"><p><code>create ()</code> returns a fresh inotify file descriptor or raises <code>Unix.Unix_error(errno, &quot;inotify_init&quot;, &quot;&quot;)</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_watch"><a href="#val-add_watch" class="anchor"></a><code><span><span class="keyword">val</span> add_watch : <span><span class="xref-unresolved">Unix</span>.file_descr <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-selector">selector</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-watch">watch</a></span></code></div><div class="spec-doc"><p><code>add_watch fd path events</code> starts observing events from <code>events</code> for path <code>path</code> at inotify file descriptor <code>fd</code> and returns a fresh watch descriptor, or raises <code>Unix.Unix_error(errno, &quot;inotify_add_watch&quot;, path)</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-rm_watch"><a href="#val-rm_watch" class="anchor"></a><code><span><span class="keyword">val</span> rm_watch : <span><span class="xref-unresolved">Unix</span>.file_descr <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-watch">watch</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>rm_watch fd watch</code> stops observing events corresponding to watch descriptor <code>watch</code> at inotify file descriptor <code>fd</code>, or raises <code>Unix.Unix_error(errno, &quot;inotify_rm_watch&quot;, path)</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-read"><a href="#val-read" class="anchor"></a><code><span><span class="keyword">val</span> read : <span><span class="xref-unresolved">Unix</span>.file_descr <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-event">event</a> list</span></span></code></div><div class="spec-doc"><p><code>read fd</code> requests a list of events for inotify file descriptor <code>fd</code>. Each event will include the watch descriptor, which can be used to determine the path that caused it, and <code>Moved_to</code> and <code>Moved_from</code> events will include a cookie that allows to associate them with each other.</p><p>If <a href="#val-read"><code>read</code></a> is not called often enough, the kernel event buffer may overflow, in which case the event kind list will consist of <code>[Q_overflow]</code>. Such an event would be associated with a watch descriptor <code>-1</code>, never returned from <a href="#val-add_watch"><code>add_watch</code></a>.</p></div></div></div></body></html>
